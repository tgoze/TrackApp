<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:progressBar="clr-namespace:Syncfusion.XForms.ProgressBar;assembly=Syncfusion.SfProgressBar.XForms"
             xmlns:SfInputLayout="clr-namespace:Syncfusion.XForms.TextInputLayout;assembly=Syncfusion.Core.XForms"                          
             xmlns:SfMaskedEdit="clr-namespace:Syncfusion.XForms.MaskedEdit;assembly=Syncfusion.SfMaskedEdit.XForms"
             xmlns:SfNumericInput="clr-namespace:Syncfusion.SfNumericTextBox.XForms;assembly=Syncfusion.SfNumericTextBox.XForms"
             x:Class="TrackApp.Run">
    <AbsoluteLayout x:Name="layout">

        <progressBar:SfCircularProgressBar Progress="75" ProgressColor="#58a4b0"
                                               VerticalOptions="CenterAndExpand"
                                               HorizontalOptions="CenterAndExpand">
            <progressBar:SfCircularProgressBar.Content>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="2*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Label x:Name="TimeLabel" Grid.Row="0"
                            TextColor="#58a4b0" 
                            Text="{Binding CurrentTime, Mode=TwoWay}"
                            FontSize="Large"
                            HorizontalTextAlignment="Center" 
                            VerticalTextAlignment="Center">
                    </Label>
                    <Button x:Name="NewRunBtn" Grid.Row="1"
                            Text="Start"
                            BackgroundColor="#a9bcd0"
                            TextColor="White"
                            WidthRequest="60" HeightRequest="60" BorderRadius="30"                            
                            VerticalOptions="Start" 
                            HorizontalOptions="FillAndExpand"/>
                </Grid>
            </progressBar:SfCircularProgressBar.Content>
        </progressBar:SfCircularProgressBar>

        <!--<Button Text="Beep"
                    VerticalOptions="End"
                    Command="{Binding AudioCommand}"/>-->

        <!--<Label Text="Target time (min): " HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" />
        <Entry x:Name="TargetTimeMinEntry" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" Placeholder="Target time (min)"></Entry>


        -->
        <!--<Label Text="Target time (sec):" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand"></Label>-->
        <!--
        <Entry x:Name="TargetTimeSecEntry" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" Text="0"></Entry>


        <Label x:Name="TotalDistanceLbl" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand">Run Distance (meters)</Label>
        <Entry x:Name="TotalDistanceEntry" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" Placeholder="100"></Entry>

        <Label x:Name="SplitDistanceLbl" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand">Split Distance (meters)</Label>
        <Entry x:Name="SplitDistanceEntry" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" Placeholder="100"></Entry>

        <Label x:Name="SplitLbl" Text="Current split: 00:00" HorizontalOptions="Center" VerticalOptions="CenterAndExpand"></Label>
        <Label x:Name="TotalLbl" Text="Total time: 00:00" HorizontalOptions="Center" VerticalOptions="CenterAndExpand"></Label>

        <Button x:Name="StartBtn" Text="Start" VerticalOptions="CenterAndExpand" HorizontalOptions="Center" Clicked="StartBtn_Clicked"></Button>
        <Button x:Name="StopBtn" Text="Stop" VerticalOptions="CenterAndExpand" HorizontalOptions="Center" IsEnabled="False" Clicked="StopBtn_Clicked"></Button>-->

        <!--Popup content TODO: UIViewController???? -->
        <ContentView x:Name="NewRunPopup" 
             BackgroundColor="#C0808080" 
             Padding="10, 0" 
             IsVisible="false" 
             AbsoluteLayout.LayoutBounds="0, 0, 1, 1" 
             AbsoluteLayout.LayoutFlags="All">
            <StackLayout VerticalOptions="Center" 
                 HorizontalOptions="Center">
                <StackLayout Orientation="Vertical" 
                             HeightRequest="300" 
                             WidthRequest="200" 
                             BackgroundColor="#d8dbe2"
                             Padding="20">
                    <Grid RowSpacing="5">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"></RowDefinition>
                            <RowDefinition Height="*"></RowDefinition>
                            <RowDefinition Height="*"></RowDefinition>
                        </Grid.RowDefinitions>
                        <SfInputLayout:SfTextInputLayout
                            Grid.Row="0"
                            Hint="Goal Time"
                            ContainerType="Outlined">
                            <SfMaskedEdit:SfMaskedEdit x:Name="GoalTimeInput"
                                Value="{Binding GoalTimeInput, Mode=TwoWay}"
                                Keyboard="Numeric"
                                Mask="00:00" />
                        </SfInputLayout:SfTextInputLayout>
                        <SfInputLayout:SfTextInputLayout
                            Grid.Row="1"
                            Hint="Run Distance"
                            ContainerType="Outlined">
                            <SfNumericInput:SfNumericTextBox 
                                x:Name="RunDistanceInput"
                                FormatString="meters"
                                MaximumNumberDecimalDigits="0"                                
                                Value="{Binding RunDistanceInput, Mode=TwoWay}"/>
                        </SfInputLayout:SfTextInputLayout>
                        <SfInputLayout:SfTextInputLayout
                            Grid.Row="2"
                            Hint="Split Distance"
                            ContainerType="Outlined">
                            <SfNumericInput:SfNumericTextBox 
                                x:Name="SplitDistanceInput"
                                FormatString="meters"
                                MaximumNumberDecimalDigits="0"
                                Value="{Binding SplitDistanceInput, Mode=TwoWay}"/>
                        </SfInputLayout:SfTextInputLayout>
                    </Grid>
                </StackLayout>
                <Grid Padding="0" Margin="0" ColumnSpacing="0"
                      BackgroundColor="#d8dbe2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Button x:Name="StartNewRunBtn" 
                            Text="Start Run" 
                            BackgroundColor="#373f51" 
                            TextColor="White"
                            HorizontalOptions="CenterAndExpand"                             
                            Grid.Column="0"
                            Command="{Binding StartRunCommand}"></Button>
                    <Button x:Name="CancelNewRunBtn" Text="Cancel" BackgroundColor="#a9bcd0" TextColor="White" 
                            HorizontalOptions="CenterAndExpand" Grid.Column="1"></Button>
                </Grid>
            </StackLayout>
        </ContentView>
    </AbsoluteLayout>
</ContentPage>